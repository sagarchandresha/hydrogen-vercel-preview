import{r as f,S as z,j as D,R as K}from"./index.463eec8f.js";import{M as Y}from"./151b8243.js";function k(){return k=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},k.apply(this,arguments)}var w;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(w||(w={}));var A=function(e){return e},M="beforeunload",G="popstate";function J(e){e===void 0&&(e={});var a=e,n=a.window,r=n===void 0?document.defaultView:n,s=r.history;function c(){var t=r.location,o=t.pathname,u=t.search,v=t.hash,l=s.state||{};return[l.idx,A({pathname:o,search:u,hash:v,state:l.usr||null,key:l.key||"default"})]}var i=null;function m(){if(i)d.call(i),i=null;else{var t=w.Pop,o=c(),u=o[0],v=o[1];if(d.length){if(u!=null){var l=h-u;l&&(i={action:t,location:v,retry:function(){P(l*-1)}},P(l))}}else L(t)}}r.addEventListener(G,m);var g=w.Pop,x=c(),h=x[0],p=x[1],R=V(),d=V();h==null&&(h=0,s.replaceState(k({},s.state,{idx:h}),""));function S(t){return typeof t=="string"?t:W(t)}function b(t,o){return o===void 0&&(o=null),A(k({pathname:p.pathname,hash:"",search:""},typeof t=="string"?X(t):t,{state:o,key:Q()}))}function T(t,o){return[{usr:t.state,key:t.key,idx:o},S(t)]}function B(t,o,u){return!d.length||(d.call({action:t,location:o,retry:u}),!1)}function L(t){g=t;var o=c();h=o[0],p=o[1],R.call({action:g,location:p})}function C(t,o){var u=w.Push,v=b(t,o);function l(){C(t,o)}if(B(u,v,l)){var y=T(v,h+1),O=y[0],E=y[1];try{s.pushState(O,"",E)}catch{r.location.assign(E)}L(u)}}function j(t,o){var u=w.Replace,v=b(t,o);function l(){j(t,o)}if(B(u,v,l)){var y=T(v,h),O=y[0],E=y[1];s.replaceState(O,"",E),L(u)}}function P(t){s.go(t)}var q={get action(){return g},get location(){return p},createHref:S,push:C,replace:j,go:P,back:function(){P(-1)},forward:function(){P(1)},listen:function(o){return R.push(o)},block:function(o){var u=d.push(o);return d.length===1&&r.addEventListener(M,$),function(){u(),d.length||r.removeEventListener(M,$)}}};return q}function $(e){e.preventDefault(),e.returnValue=""}function V(){var e=[];return{get length(){return e.length},push:function(n){return e.push(n),function(){e=e.filter(function(r){return r!==n})}},call:function(n){e.forEach(function(r){return r&&r(n)})}}}function Q(){return Math.random().toString(36).substr(2,8)}function W(e){var a=e.pathname,n=a===void 0?"/":a,r=e.search,s=r===void 0?"":r,c=e.hash,i=c===void 0?"":c;return s&&s!=="?"&&(n+=s.charAt(0)==="?"?s:"?"+s),i&&i!=="#"&&(n+=i.charAt(0)==="#"?i:"#"+i),n}function X(e){var a={};if(e){var n=e.indexOf("#");n>=0&&(a.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(a.search=e.substr(r),e=e.substr(0,r)),e&&(a.pathname=e)}return a}function Z(){var e;return(e=f.exports.useContext(z))!=null?e:{}}const _=f.exports.createContext(void 0);let H=!0;const N={},F=({history:e,children:a})=>{const n=f.exports.useMemo(()=>e||J(),[e]),[r,s]=f.exports.useState(n.location),[c,i]=f.exports.useState(!1),{pending:m,locationServerProps:g,setLocationServerProps:x}=Z();return te({location:r,pending:m,serverProps:g,scrollNeedsRestoration:c,onFinishNavigating:()=>i(!1)}),f.exports.useLayoutEffect(()=>{const h=n.listen(({location:p,action:R})=>{var b;N[r.key]=window.scrollY,x({pathname:p.pathname,search:p.search}),s(p);const d=(b=p.state)!=null?b:{},S=R==="POP"||!!d.scroll;i(S)});return()=>h()},[n,r,i,s,x]),D(_.Provider,{value:{history:n,location:r},children:a})};function U(){if(Y)return{location:{},history:{}};const e=f.exports.useContext(_);if(e)return e;throw new Error("Router hooks and <Link> component must be used within a <Router> component")}function I(){return U().location}function ee(e){K.useEffect(()=>(window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}),[e])}function te({location:e,pending:a,serverProps:n,scrollNeedsRestoration:r,onFinishNavigating:s}){f.exports.useEffect(()=>{window.history.scrollRestoration="manual"},[]),ee(f.exports.useCallback(()=>{window.history.scrollRestoration="auto"},[])),f.exports.useLayoutEffect(()=>{if(H||!r){H=!1;return}const c=N[e.key];if(!a&&e.pathname===n.pathname&&e.search===n.search){if(e.hash){const m=document.querySelector(e.hash);if(m){m.scrollIntoView(),s();return}}if(c){window.scrollTo(0,c),s();return}window.scrollTo(0,0),s()}},[e.pathname,e.search,e.hash,e.key,a,n.pathname,n.search,r,s])}var ae=Object.freeze(Object.defineProperty({__proto__:null,RouterContext:_,BrowserRouter:F,useRouter:U,useLocation:I},Symbol.toStringTag,{value:"Module"}));export{ae as B,_ as R,I as a,Z as b,W as c,U as u};
//# sourceMappingURL=c09bf6ac.js.map
